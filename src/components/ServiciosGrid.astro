---
import { getCollection } from "astro:content";
import ServiceIcon from "./ServiceIcon.astro";

const servicios = await getCollection("servicios", ({ data }) => data.disponible !== false);

servicios.sort((a, b) => {
  const ao = a.data.orden ?? 0;
  const bo = b.data.orden ?? 0;
  return ao - bo;
});
---

<section class="mb-12">
  <header class="mb-6 flex flex-col gap-2">
    <h2 class="text-xl font-semibold text-slate-50 md:text-2xl">
      Servicios de cerrajería
    </h2>
    <p class="max-w-2xl text-sm text-slate-300">
      Trabajamos sobre cerraduras, herrajes, puertas de cristal y apertura de
      vehículos, con atención en La Boca y alrededores.
    </p>
  </header>

  <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-3">
    {servicios.map((item) => {
      const { title, descripcionCorta, descripcionLarga } = item.data as any;

      return (
        <article
          class="group flex h-full flex-col rounded-2xl border border-slate-800 bg-slate-950/70 p-4 shadow-sm
                 transition-transform transition-colors duration-150
                 hover:-translate-y-0.5 hover:border-amber-400/70 hover:shadow-lg"
        >
          <div class="flex items-start gap-3">
            <ServiceIcon title={title} />
            <div class="flex-1">
              <h3 class="text-sm font-semibold text-slate-50 md:text-base">
                {title}
              </h3>
              <p class="mt-1 text-[0.75rem] uppercase tracking-wide text-slate-400 group-hover:text-slate-300">
                Servicio especializado
              </p>
            </div>
          </div>

          <p class="mt-3 text-xs text-slate-300 md:text-sm">
            {descripcionCorta}
          </p>

          {descripcionLarga && (
            <p class="mt-2 text-[0.8rem] text-slate-400">
              {descripcionLarga}
            </p>
          )}
        </article>
      );
    })}
  </div>

  <p class="mt-4 text-[0.75rem] text-slate-400">
    Para costos y tiempos de trabajo, escribinos por WhatsApp o llamanos al
    número del encabezado. Las urgencias se atienden primero.
  </p>
</section>
